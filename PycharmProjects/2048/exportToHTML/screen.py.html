<html>
<head>
<title>screen.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6897bb;}
.s3 { color: #6a8759;}
.s4 { color: #808080;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
screen.py</font>
</center></td></tr></table>
<pre><span class="s0">from </span><span class="s1">graphics </span><span class="s0">import </span><span class="s1">*</span>
<span class="s0">import </span><span class="s1">random</span>


<span class="s0">def </span><span class="s1">getEntries(_list):</span>
    <span class="s1">entries = []</span>
    <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(len(_list)):</span>
        <span class="s0">if not </span><span class="s1">_list[i] == </span><span class="s2">0</span><span class="s1">:</span>
            <span class="s1">entries.append(i)</span>
    <span class="s0">return </span><span class="s1">entries</span>


<span class="s0">def </span><span class="s1">reorganizeList(_list</span><span class="s0">, </span><span class="s1">order):</span>
    <span class="s1">organized_list = []</span>
    <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">order:</span>
        <span class="s1">organized_list.append(_list[i])</span>
    <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(len(_list)):</span>
        <span class="s1">_list[i] = organized_list[i]</span>


<span class="s0">def </span><span class="s1">checkSpaces(_list):</span>
    <span class="s0">for </span><span class="s1">row </span><span class="s0">in </span><span class="s1">_list:</span>
        <span class="s0">if </span><span class="s2">0 </span><span class="s0">in </span><span class="s1">row:</span>
            <span class="s0">return False</span>
    <span class="s0">return True</span>


<span class="s0">class </span><span class="s1">Screen:</span>
    <span class="s0">def </span><span class="s1">__init__(self):</span>
        <span class="s1">self.score = </span><span class="s2">0</span>
        <span class="s1">self.win = GraphWin(</span><span class="s3">&quot;2048&quot;</span><span class="s0">, </span><span class="s2">512</span><span class="s0">, </span><span class="s2">512</span><span class="s1">)</span>
        <span class="s1">self.drawBackground()</span>
        <span class="s1">self.fullcount = </span><span class="s2">0</span>
        <span class="s1">self.board = [[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">]]</span>
        <span class="s1">Tile(self.board</span><span class="s0">, </span><span class="s1">self.win</span><span class="s0">, </span><span class="s1">self)</span>
        <span class="s1">Tile(self.board</span><span class="s0">, </span><span class="s1">self.win</span><span class="s0">, </span><span class="s1">self)</span>
        <span class="s1">print(self.board)</span>
        <span class="s0">while True</span><span class="s1">:</span>
            <span class="s1">key = self.win.getKey()</span>
            <span class="s0">if </span><span class="s1">self.moveTiles(key):</span>
                <span class="s1">Tile(self.board</span><span class="s0">, </span><span class="s1">self.win</span><span class="s0">, </span><span class="s1">self)</span>
                <span class="s1">print(</span><span class="s3">&quot;Score:&quot;</span><span class="s0">, </span><span class="s1">self.score)</span>
                <span class="s1">self.fullcount = </span><span class="s2">0</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s0">if </span><span class="s1">checkSpaces(self.board):</span>
                    <span class="s1">self.fullcount += </span><span class="s2">1</span>
                <span class="s0">else</span><span class="s1">:</span>
                    <span class="s1">self.fullcount = </span><span class="s2">0</span>
                <span class="s0">if </span><span class="s1">self.fullcount &gt;= </span><span class="s2">5</span><span class="s1">:</span>
                    <span class="s1">endgame = Text(Point(</span><span class="s2">256</span><span class="s0">, </span><span class="s2">256</span><span class="s1">)</span><span class="s0">, </span><span class="s3">&quot;Game Over&quot;</span><span class="s1">)</span>
                    <span class="s1">endgame.setSize(</span><span class="s2">36</span><span class="s1">)</span>
                    <span class="s1">endgame.setOutline(color_rgb(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span>
                    <span class="s1">endgame.draw(self.win)</span>
                    <span class="s1">self.win.getMouse()</span>
                    <span class="s1">self.win.close()</span>

    <span class="s0">def </span><span class="s1">drawBackground(self):</span>
        <span class="s1">self.win.setBackground(color_rgb(</span><span class="s2">209</span><span class="s0">, </span><span class="s2">204</span><span class="s0">, </span><span class="s2">192</span><span class="s1">))</span>
        <span class="s1">background = []</span>
        <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(</span><span class="s2">5</span><span class="s1">):</span>
            <span class="s1">background.append(Line(Point(</span><span class="s2">8 </span><span class="s1">+ i * </span><span class="s2">124</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Point(</span><span class="s2">8 </span><span class="s1">+ </span><span class="s2">124 </span><span class="s1">* i</span><span class="s0">, </span><span class="s2">512</span><span class="s1">)))</span>
            <span class="s1">background.append(Line(Point(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">8 </span><span class="s1">+ i * </span><span class="s2">124</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Point(</span><span class="s2">512</span><span class="s0">, </span><span class="s2">8 </span><span class="s1">+ </span><span class="s2">124 </span><span class="s1">* i)))</span>
            <span class="s1">print(background)</span>
        <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(</span><span class="s2">10</span><span class="s1">):</span>
            <span class="s1">background[i].setOutline(color_rgb(</span><span class="s2">181</span><span class="s0">, </span><span class="s2">167</span><span class="s0">, </span><span class="s2">147</span><span class="s1">))</span>
            <span class="s1">background[i].setFill(color_rgb(</span><span class="s2">181</span><span class="s0">, </span><span class="s2">167</span><span class="s0">, </span><span class="s2">147</span><span class="s1">))</span>
            <span class="s1">background[i].setWidth(</span><span class="s2">16</span><span class="s1">)</span>
            <span class="s1">background[i].draw(self.win)</span>

    <span class="s0">def </span><span class="s1">moveTiles(self</span><span class="s0">, </span><span class="s1">direction):</span>
        <span class="s1">something_happened = </span><span class="s0">False</span>
        <span class="s0">if </span><span class="s1">direction == </span><span class="s3">&quot;Left&quot;</span><span class="s1">:</span>
            <span class="s0">for </span><span class="s1">row </span><span class="s0">in </span><span class="s1">self.board:</span>
                <span class="s1">entries = getEntries(row)</span>
                <span class="s0">if </span><span class="s1">len(entries) == </span><span class="s2">1</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">3</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s1">row[</span><span class="s2">0</span><span class="s1">].move(Point(</span><span class="s2">16</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].point.y))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">2</span><span class="s1">:</span>
                    <span class="s1">entries.sort()</span>
                    <span class="s0">if </span><span class="s1">row[entries[</span><span class="s2">0</span><span class="s1">]].value == row[entries[</span><span class="s2">1</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].move(Point(</span><span class="s2">16</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].point.y))</span>
                    <span class="s0">else</span><span class="s1">:</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].move(Point(</span><span class="s2">16</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].point.y))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">3</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].move(Point(</span><span class="s2">140</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].point.y))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">3</span><span class="s1">:</span>
                    <span class="s1">entries.sort()</span>
                    <span class="s0">if </span><span class="s1">row[entries[</span><span class="s2">0</span><span class="s1">]].value == row[entries[</span><span class="s2">1</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].move(Point(</span><span class="s2">16</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].point.y))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">3</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].move(Point(</span><span class="s2">140</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].point.y))</span>
                    <span class="s0">elif </span><span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]].value == row[entries[</span><span class="s2">2</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].move(Point(</span><span class="s2">16</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].point.y))</span>
                        <span class="s1">row[entries[</span><span class="s2">2</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">row[entries[</span><span class="s2">2</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].move(Point(</span><span class="s2">140</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].point.y))</span>
                    <span class="s0">else</span><span class="s1">:</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].move(Point(</span><span class="s2">16</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].point.y))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].move(Point(</span><span class="s2">140</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].point.y))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">3</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].move(Point(</span><span class="s2">264</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].point.y))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">4</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].value == row[</span><span class="s2">1</span><span class="s1">].value </span><span class="s0">and </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].value == row[</span><span class="s2">3</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].move(Point(</span><span class="s2">140</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].point.y))</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].value == row[</span><span class="s2">1</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].move(Point(</span><span class="s2">140</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].point.y))</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].move(Point(</span><span class="s2">264</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].point.y))</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].value == row[</span><span class="s2">2</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].move(Point(</span><span class="s2">264</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].point.y))</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].value == row[</span><span class="s2">3</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].upgradeValue()</span>
        <span class="s0">elif </span><span class="s1">direction == </span><span class="s3">&quot;Right&quot;</span><span class="s1">:</span>
            <span class="s0">for </span><span class="s1">row </span><span class="s0">in </span><span class="s1">self.board:</span>
                <span class="s1">entries = getEntries(row)</span>
                <span class="s0">if </span><span class="s1">len(entries) == </span><span class="s2">1</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">0</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                    <span class="s1">row[</span><span class="s2">3</span><span class="s1">].move(Point(</span><span class="s2">388</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].point.y))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">2</span><span class="s1">:</span>
                    <span class="s1">entries.sort(reverse=</span><span class="s0">True</span><span class="s1">)</span>
                    <span class="s0">if </span><span class="s1">row[entries[</span><span class="s2">0</span><span class="s1">]].value == row[entries[</span><span class="s2">1</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].move(Point(</span><span class="s2">388</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].point.y))</span>
                    <span class="s0">else</span><span class="s1">:</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].move(Point(</span><span class="s2">388</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].point.y))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">0</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].move(Point(</span><span class="s2">264</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].point.y))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">3</span><span class="s1">:</span>
                    <span class="s1">entries.sort(reverse=</span><span class="s0">True</span><span class="s1">)</span>
                    <span class="s0">if </span><span class="s1">row[entries[</span><span class="s2">0</span><span class="s1">]].value == row[entries[</span><span class="s2">1</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].move(Point(</span><span class="s2">388</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].point.y))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">0</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].move(Point(</span><span class="s2">264</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].point.y))</span>
                    <span class="s0">elif </span><span class="s1">row[entries[</span><span class="s2">1</span><span class="s1">]].value == row[entries[</span><span class="s2">2</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].move(Point(</span><span class="s2">388</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].point.y))</span>
                        <span class="s1">row[entries[</span><span class="s2">2</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">row[entries[</span><span class="s2">2</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].move(Point(</span><span class="s2">264</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].point.y))</span>
                    <span class="s0">else</span><span class="s1">:</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].move(Point(</span><span class="s2">388</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].point.y))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].move(Point(</span><span class="s2">264</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].point.y))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">0</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].move(Point(</span><span class="s2">140</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].point.y))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">4</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].value == row[</span><span class="s2">2</span><span class="s1">].value </span><span class="s0">and </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].value == row[</span><span class="s2">0</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].move(Point(</span><span class="s2">264</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].point.y))</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">row[</span><span class="s2">3</span><span class="s1">].value == row[</span><span class="s2">2</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">3</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].move(Point(</span><span class="s2">264</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].point.y))</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].move(Point(</span><span class="s2">140</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].point.y))</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">row[</span><span class="s2">2</span><span class="s1">].value == row[</span><span class="s2">1</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">2</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].move(Point(</span><span class="s2">140</span><span class="s0">, </span><span class="s1">row[</span><span class="s2">0</span><span class="s1">].point.y))</span>
                        <span class="s1">reorganizeList(row</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">row[</span><span class="s2">1</span><span class="s1">].value == row[</span><span class="s2">0</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">row[</span><span class="s2">0</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">row[</span><span class="s2">1</span><span class="s1">].upgradeValue()</span>
        <span class="s0">elif </span><span class="s1">direction == </span><span class="s3">&quot;Up&quot;</span><span class="s1">:</span>
            <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(</span><span class="s2">4</span><span class="s1">):</span>
                <span class="s1">column = [row[i] </span><span class="s0">for </span><span class="s1">row </span><span class="s0">in </span><span class="s1">self.board]</span>
                <span class="s1">entries = getEntries(column)</span>
                <span class="s1">entries.sort()</span>
                <span class="s0">if </span><span class="s1">len(entries) == </span><span class="s2">1</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">3</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s1">column[</span><span class="s2">0</span><span class="s1">].move(Point(column[</span><span class="s2">0</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">16</span><span class="s1">))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">2</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">column[entries[</span><span class="s2">0</span><span class="s1">]].value == column[entries[</span><span class="s2">1</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].move(Point(column[</span><span class="s2">0</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">16</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].upgradeValue()</span>
                    <span class="s0">else</span><span class="s1">:</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].move(Point(column[</span><span class="s2">0</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">16</span><span class="s1">))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">3</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].move(Point(column[</span><span class="s2">1</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">140</span><span class="s1">))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">3</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">column[entries[</span><span class="s2">0</span><span class="s1">]].value == column[entries[</span><span class="s2">1</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].move(Point(column[</span><span class="s2">0</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">16</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].upgradeValue()</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">3</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].move(Point(column[</span><span class="s2">1</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">140</span><span class="s1">))</span>
                    <span class="s0">elif </span><span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]].value == column[entries[</span><span class="s2">2</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].move(Point(column[</span><span class="s2">0</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">16</span><span class="s1">))</span>
                        <span class="s1">column[entries[</span><span class="s2">2</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">column[entries[</span><span class="s2">2</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].move(Point(column[</span><span class="s2">1</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">140</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].upgradeValue()</span>
                    <span class="s0">else</span><span class="s1">:</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].move(Point(column[</span><span class="s2">0</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">16</span><span class="s1">))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].move(Point(column[</span><span class="s2">1</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">140</span><span class="s1">))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">3</span><span class="s1">:</span>
                            <span class="s1">something_happened = </span><span class="s0">True</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].move(Point(column[</span><span class="s2">2</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">264</span><span class="s1">))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">4</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">column[</span><span class="s2">0</span><span class="s1">].value == column[</span><span class="s2">1</span><span class="s1">].value </span><span class="s0">and </span><span class="s1">column[</span><span class="s2">2</span><span class="s1">].value == column[</span><span class="s2">3</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].move(Point(column[</span><span class="s2">2</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">140</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">column[</span><span class="s2">0</span><span class="s1">].value == column[</span><span class="s2">1</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].move(Point(column[</span><span class="s2">2</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">140</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].move(Point(column[</span><span class="s2">3</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">264</span><span class="s1">))</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">column[</span><span class="s2">1</span><span class="s1">].value == column[</span><span class="s2">2</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].move(Point(column[</span><span class="s2">3</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">264</span><span class="s1">))</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">column[</span><span class="s2">2</span><span class="s1">].value == column[</span><span class="s2">3</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].upgradeValue()</span>
                <span class="s0">for </span><span class="s1">j </span><span class="s0">in </span><span class="s1">range(</span><span class="s2">4</span><span class="s1">):</span>
                    <span class="s1">self.board[j][i] = column[j]</span>
        <span class="s0">elif </span><span class="s1">direction == </span><span class="s3">&quot;Down&quot;</span><span class="s1">:</span>
            <span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(</span><span class="s2">4</span><span class="s1">):</span>
                <span class="s1">column = [row[i] </span><span class="s0">for </span><span class="s1">row </span><span class="s0">in </span><span class="s1">self.board]</span>
                <span class="s1">entries = getEntries(column)</span>
                <span class="s1">entries.sort(reverse=</span><span class="s0">True</span><span class="s1">)</span>
                <span class="s0">if </span><span class="s1">len(entries) == </span><span class="s2">1</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">0</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                    <span class="s1">column[</span><span class="s2">3</span><span class="s1">].move(Point(column[</span><span class="s2">3</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">388</span><span class="s1">))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">2</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">column[entries[</span><span class="s2">0</span><span class="s1">]].value == column[entries[</span><span class="s2">1</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].move(Point(column[</span><span class="s2">3</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">388</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].upgradeValue()</span>
                    <span class="s0">else</span><span class="s1">:</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].move(Point(column[</span><span class="s2">3</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">388</span><span class="s1">))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">0</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].move(Point(column[</span><span class="s2">2</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">264</span><span class="s1">))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">3</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">column[entries[</span><span class="s2">0</span><span class="s1">]].value == column[entries[</span><span class="s2">1</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].move(Point(column[</span><span class="s2">3</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">388</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].upgradeValue()</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s0">elif </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">0</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].move(Point(column[</span><span class="s2">2</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">264</span><span class="s1">))</span>
                    <span class="s0">elif </span><span class="s1">column[entries[</span><span class="s2">1</span><span class="s1">]].value == column[entries[</span><span class="s2">2</span><span class="s1">]].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].move(Point(column[</span><span class="s2">3</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">388</span><span class="s1">))</span>
                        <span class="s1">column[entries[</span><span class="s2">2</span><span class="s1">]].selfDestruct()</span>
                        <span class="s1">column[entries[</span><span class="s2">2</span><span class="s1">]] = </span><span class="s2">0</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].move(Point(column[</span><span class="s2">2</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">264</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].upgradeValue()</span>
                    <span class="s0">else</span><span class="s1">:</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">0</span><span class="s1">] == </span><span class="s2">2</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].move(Point(column[</span><span class="s2">3</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">388</span><span class="s1">))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">1</span><span class="s1">] == </span><span class="s2">1</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].move(Point(column[</span><span class="s2">2</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">264</span><span class="s1">))</span>
                        <span class="s0">if </span><span class="s1">entries[</span><span class="s2">2</span><span class="s1">] == </span><span class="s2">0</span><span class="s1">:</span>
                            <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].move(Point(column[</span><span class="s2">1</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">140</span><span class="s1">))</span>
                <span class="s0">elif </span><span class="s1">len(entries) == </span><span class="s2">4</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">column[</span><span class="s2">3</span><span class="s1">].value == column[</span><span class="s2">2</span><span class="s1">].value </span><span class="s0">and </span><span class="s1">column[</span><span class="s2">1</span><span class="s1">].value == column[</span><span class="s2">0</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].move(Point(column[</span><span class="s2">1</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">264</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">column[</span><span class="s2">3</span><span class="s1">].value == column[</span><span class="s2">2</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">3</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].move(Point(column[</span><span class="s2">1</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">264</span><span class="s1">))</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].move(Point(column[</span><span class="s2">0</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">140</span><span class="s1">))</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">column[</span><span class="s2">2</span><span class="s1">].value == column[</span><span class="s2">1</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">2</span><span class="s1">].upgradeValue()</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].move(Point(column[</span><span class="s2">0</span><span class="s1">].point.x</span><span class="s0">, </span><span class="s2">140</span><span class="s1">))</span>
                        <span class="s1">reorganizeList(column</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
                    <span class="s0">elif </span><span class="s1">column[</span><span class="s2">1</span><span class="s1">].value == column[</span><span class="s2">0</span><span class="s1">].value:</span>
                        <span class="s1">something_happened = </span><span class="s0">True</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">].selfDestruct()</span>
                        <span class="s1">column[</span><span class="s2">0</span><span class="s1">] = </span><span class="s2">0</span>
                        <span class="s1">column[</span><span class="s2">1</span><span class="s1">].upgradeValue()</span>
                <span class="s0">for </span><span class="s1">j </span><span class="s0">in </span><span class="s1">range(</span><span class="s2">4</span><span class="s1">):</span>
                    <span class="s1">self.board[j][i] = column[j]</span>
        <span class="s0">return </span><span class="s1">something_happened</span>


<span class="s0">class </span><span class="s1">Tile:</span>
    <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">board</span><span class="s0">, </span><span class="s1">win</span><span class="s0">, </span><span class="s1">screen):</span>
        <span class="s1">self.screen = screen</span>
        <span class="s4"># sets the value of the tile</span>
        <span class="s1">self.value = </span><span class="s2">2 </span><span class="s0">if </span><span class="s1">random.random() &lt; </span><span class="s2">0.9 </span><span class="s0">else </span><span class="s2">4</span>
        <span class="s4"># finds number of valid positions</span>
        <span class="s1">spaces = </span><span class="s2">0</span>
        <span class="s0">for </span><span class="s1">row </span><span class="s0">in </span><span class="s1">board:</span>
            <span class="s0">for </span><span class="s1">entry </span><span class="s0">in </span><span class="s1">row:</span>
                <span class="s0">if </span><span class="s1">entry == </span><span class="s2">0</span><span class="s1">:</span>
                    <span class="s1">spaces += </span><span class="s2">1</span>
        <span class="s4"># The space that the tile is in</span>
        <span class="s1">self.pos = random.randint(</span><span class="s2">0</span><span class="s0">, </span><span class="s1">spaces - </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s4"># The point of the upper left corner of the tile</span>
        <span class="s1">i = </span><span class="s2">0</span>
        <span class="s0">for </span><span class="s1">j </span><span class="s0">in </span><span class="s1">range(</span><span class="s2">4</span><span class="s1">):</span>
            <span class="s0">for </span><span class="s1">k </span><span class="s0">in </span><span class="s1">range(</span><span class="s2">4</span><span class="s1">):</span>
                <span class="s0">if </span><span class="s1">board[j][k] == </span><span class="s2">0</span><span class="s1">:</span>
                    <span class="s0">if </span><span class="s1">i == self.pos:</span>
                        <span class="s1">print(j</span><span class="s0">, </span><span class="s1">k)</span>
                        <span class="s1">board[j][k] = self</span>
                        <span class="s1">self.point = Point(</span><span class="s2">16 </span><span class="s1">+ k * </span><span class="s2">124</span><span class="s0">, </span><span class="s2">16 </span><span class="s1">+ j * </span><span class="s2">124</span><span class="s1">)</span>
                    <span class="s1">i += </span><span class="s2">1</span>
        <span class="s1">self.body = Rectangle(self.point</span><span class="s0">, </span><span class="s1">Point(self.point.x + </span><span class="s2">108</span><span class="s0">, </span><span class="s1">self.point.y + </span><span class="s2">108</span><span class="s1">))</span>
        <span class="s1">self.colors = {</span>
            <span class="s2">2</span><span class="s1">: color_rgb(</span><span class="s2">242</span><span class="s0">, </span><span class="s2">235</span><span class="s0">, </span><span class="s2">230</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">4</span><span class="s1">: color_rgb(</span><span class="s2">240</span><span class="s0">, </span><span class="s2">223</span><span class="s0">, </span><span class="s2">211</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">8</span><span class="s1">: color_rgb(</span><span class="s2">237</span><span class="s0">, </span><span class="s2">167</span><span class="s0">, </span><span class="s2">114</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">16</span><span class="s1">: color_rgb(</span><span class="s2">227</span><span class="s0">, </span><span class="s2">143</span><span class="s0">, </span><span class="s2">98</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">32</span><span class="s1">: color_rgb(</span><span class="s2">242</span><span class="s0">, </span><span class="s2">120</span><span class="s0">, </span><span class="s2">82</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">64</span><span class="s1">: color_rgb(</span><span class="s2">250</span><span class="s0">, </span><span class="s2">92</span><span class="s0">, </span><span class="s2">67</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">128</span><span class="s1">: color_rgb(</span><span class="s2">237</span><span class="s0">, </span><span class="s2">221</span><span class="s0">, </span><span class="s2">147</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">256</span><span class="s1">: color_rgb(</span><span class="s2">235</span><span class="s0">, </span><span class="s2">212</span><span class="s0">, </span><span class="s2">113</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">512</span><span class="s1">: color_rgb(</span><span class="s2">235</span><span class="s0">, </span><span class="s2">208</span><span class="s0">, </span><span class="s2">89</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">1024</span><span class="s1">: color_rgb(</span><span class="s2">245</span><span class="s0">, </span><span class="s2">214</span><span class="s0">, </span><span class="s2">78</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s2">2048</span><span class="s1">: color_rgb(</span><span class="s2">252</span><span class="s0">, </span><span class="s2">216</span><span class="s0">, </span><span class="s2">56</span><span class="s1">)</span>
        <span class="s1">}</span>
        <span class="s1">self.body.setFill(self.colors.get(self.value))</span>
        <span class="s1">self.body.setOutline(self.colors.get(self.value))</span>
        <span class="s1">self.body.draw(win)</span>
        <span class="s1">self.text = Text(Point(self.point.x + </span><span class="s2">54</span><span class="s0">, </span><span class="s1">self.point.y + </span><span class="s2">54</span><span class="s1">)</span><span class="s0">, </span><span class="s1">self.value)</span>
        <span class="s1">self.text.setSize(</span><span class="s2">36</span><span class="s1">)</span>
        <span class="s1">self.text.draw(win)</span>

    <span class="s0">def </span><span class="s1">move(self</span><span class="s0">, </span><span class="s1">point):</span>
        <span class="s1">dx = point.x - self.point.x</span>
        <span class="s1">dy = point.y - self.point.y</span>
        <span class="s1">self.body.move(dx</span><span class="s0">, </span><span class="s1">dy)</span>
        <span class="s1">self.text.move(dx</span><span class="s0">, </span><span class="s1">dy)</span>
        <span class="s1">self.point = self.body.getP1()</span>

    <span class="s0">def </span><span class="s1">selfDestruct(self):</span>
        <span class="s1">self.body.undraw()</span>
        <span class="s1">self.text.undraw()</span>

    <span class="s0">def </span><span class="s1">upgradeValue(self):</span>
        <span class="s1">self.value *= </span><span class="s2">2</span>
        <span class="s1">self.body.setFill(self.colors.get(self.value))</span>
        <span class="s1">self.body.setOutline(self.colors.get(self.value))</span>
        <span class="s1">self.text.setText(self.value)</span>
        <span class="s1">self.screen.score += self.value</span>


<span class="s1">Screen()</span>
</pre>
</body>
</html>