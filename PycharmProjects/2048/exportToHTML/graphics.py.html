<html>
<head>
<title>graphics.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #629755; font-style: italic;}
.s3 { color: #6a8759;}
.s4 { color: #cc7832;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
graphics.py</font>
</center></td></tr></table>
<pre><span class="s0"># graphics.py</span>
<span class="s2">&quot;&quot;&quot;Simple object oriented graphics library 
 
The library is designed to make it very easy for novice programmers to 
experiment with computer graphics in an object oriented fashion. It is 
written by John Zelle for use with the book &quot;Python Programming: An 
Introduction to Computer Science&quot; (Franklin, Beedle &amp; Associates). 
 
LICENSE: This is open-source software released under the terms of the 
GPL (http://www.gnu.org/licenses/gpl.html). 
 
PLATFORMS: The package is a wrapper around Tkinter and should run on 
any platform where Tkinter is available. 
 
INSTALLATION: Put this file somewhere where Python can see it. 
 
OVERVIEW: There are two kinds of objects in the library. The GraphWin 
class implements a window where drawing can be done and various 
GraphicsObjects are provided that can be drawn into a GraphWin. As a 
simple example, here is a complete program to draw a circle of radius 
10 centered in a 100x100 window: 
 
-------------------------------------------------------------------- 
from graphics import * 
 
def main(): 
    win = GraphWin(&quot;My Circle&quot;, 100, 100) 
    c = Circle(Point(50,50), 10) 
    c.draw(win) 
    win.getMouse() # Pause to view result 
    win.close()    # Close window when done 
 
main() 
-------------------------------------------------------------------- 
GraphWin objects support coordinate transformation through the 
setCoords method and mouse and keyboard interaction methods. 
 
The library provides the following graphical objects: 
    Point 
    Line 
    Circle 
    Oval 
    Rectangle 
    Polygon 
    Text 
    Entry (for text-based input) 
    Image 
 
Various attributes of graphical objects can be set such as 
outline-color, fill-color and line-width. Graphical objects also 
support moving and hiding for animation effects. 
 
The library also provides a very simple class for pixel-based image 
manipulation, Pixmap. A pixmap can be loaded from a file and displayed 
using an Image object. Both getPixel and setPixel methods are provided 
for manipulating the image. 
 
DOCUMENTATION: For complete documentation, see Chapter 4 of &quot;Python 
Programming: An Introduction to Computer Science&quot; by John Zelle, 
published by Franklin, Beedle &amp; Associates.  Also see 
http://mcsp.wartburg.edu/zelle/python for a quick reference&quot;&quot;&quot;</span>

<span class="s1">__version__ = </span><span class="s3">&quot;5.0&quot;</span>

<span class="s0"># Version 5 8/26/2016</span>
<span class="s0">#     * update at bottom to fix MacOS issue causing askopenfile() to hang</span>
<span class="s0">#     * update takes an optional parameter specifying update rate</span>
<span class="s0">#     * Entry objects get focus when drawn</span>
<span class="s0">#     * __repr_ for all objects</span>
<span class="s0">#     * fixed offset problem in window, made canvas borderless</span>

<span class="s0"># Version 4.3 4/25/2014</span>
<span class="s0">#     * Fixed Image getPixel to work with Python 3.4, TK 8.6 (tuple type handling)</span>
<span class="s0">#     * Added interactive keyboard input (getKey and checkKey) to GraphWin</span>
<span class="s0">#     * Modified setCoords to cause redraw of current objects, thus</span>
<span class="s0">#       changing the view. This supports scrolling around via setCoords.</span>
<span class="s0">#</span>
<span class="s0"># Version 4.2 5/26/2011</span>
<span class="s0">#     * Modified Image to allow multiple undraws like other GraphicsObjects</span>
<span class="s0"># Version 4.1 12/29/2009</span>
<span class="s0">#     * Merged Pixmap and Image class. Old Pixmap removed, use Image.</span>
<span class="s0"># Version 4.0.1 10/08/2009</span>
<span class="s0">#     * Modified the autoflush on GraphWin to default to True</span>
<span class="s0">#     * Autoflush check on close, setBackground</span>
<span class="s0">#     * Fixed getMouse to flush pending clicks at entry</span>
<span class="s0"># Version 4.0 08/2009</span>
<span class="s0">#     * Reverted to non-threaded version. The advantages (robustness,</span>
<span class="s0">#         efficiency, ability to use with other Tk code, etc.) outweigh</span>
<span class="s0">#         the disadvantage that interactive use with IDLE is slightly more</span>
<span class="s0">#         cumbersome.</span>
<span class="s0">#     * Modified to run in either Python 2.x or 3.x (same file).</span>
<span class="s0">#     * Added Image.getPixmap()</span>
<span class="s0">#     * Added update() -- stand alone function to cause any pending</span>
<span class="s0">#           graphics changes to display.</span>
<span class="s0">#</span>
<span class="s0"># Version 3.4 10/16/07</span>
<span class="s0">#     Fixed GraphicsError to avoid &quot;exploded&quot; error messages.</span>
<span class="s0"># Version 3.3 8/8/06</span>
<span class="s0">#     Added checkMouse method to GraphWin</span>
<span class="s0"># Version 3.2.3</span>
<span class="s0">#     Fixed error in Polygon init spotted by Andrew Harrington</span>
<span class="s0">#     Fixed improper threading in Image constructor</span>
<span class="s0"># Version 3.2.2 5/30/05</span>
<span class="s0">#     Cleaned up handling of exceptions in Tk thread. The graphics package</span>
<span class="s0">#     now raises an exception if attempt is made to communicate with</span>
<span class="s0">#     a dead Tk thread.</span>
<span class="s0"># Version 3.2.1 5/22/05</span>
<span class="s0">#     Added shutdown function for tk thread to eliminate race-condition</span>
<span class="s0">#        error &quot;chatter&quot; when main thread terminates</span>
<span class="s0">#     Renamed various private globals with _</span>
<span class="s0"># Version 3.2 5/4/05</span>
<span class="s0">#     Added Pixmap object for simple image manipulation.</span>
<span class="s0"># Version 3.1 4/13/05</span>
<span class="s0">#     Improved the Tk thread communication so that most Tk calls</span>
<span class="s0">#        do not have to wait for synchonization with the Tk thread.</span>
<span class="s0">#        (see _tkCall and _tkExec)</span>
<span class="s0"># Version 3.0 12/30/04</span>
<span class="s0">#     Implemented Tk event loop in separate thread. Should now work</span>
<span class="s0">#        interactively with IDLE. Undocumented autoflush feature is</span>
<span class="s0">#        no longer necessary. Its default is now False (off). It may</span>
<span class="s0">#        be removed in a future version.</span>
<span class="s0">#     Better handling of errors regarding operations on windows that</span>
<span class="s0">#       have been closed.</span>
<span class="s0">#     Addition of an isClosed method to GraphWindow class.</span>

<span class="s0"># Version 2.2 8/26/04</span>
<span class="s0">#     Fixed cloning bug reported by Joseph Oldham.</span>
<span class="s0">#     Now implements deep copy of config info.</span>
<span class="s0"># Version 2.1 1/15/04</span>
<span class="s0">#     Added autoflush option to GraphWin. When True (default) updates on</span>
<span class="s0">#        the window are done after each action. This makes some graphics</span>
<span class="s0">#        intensive programs sluggish. Turning off autoflush causes updates</span>
<span class="s0">#        to happen during idle periods or when flush is called.</span>
<span class="s0"># Version 2.0</span>
<span class="s0">#     Updated Documentation</span>
<span class="s0">#     Made Polygon accept a list of Points in constructor</span>
<span class="s0">#     Made all drawing functions call TK update for easier animations</span>
<span class="s0">#          and to make the overall package work better with</span>
<span class="s0">#          Python 2.3 and IDLE 1.0 under Windows (still some issues).</span>
<span class="s0">#     Removed vestigial turtle graphics.</span>
<span class="s0">#     Added ability to configure font for Entry objects (analogous to Text)</span>
<span class="s0">#     Added setTextColor for Text as an alias of setFill</span>
<span class="s0">#     Changed to class-style exceptions</span>
<span class="s0">#     Fixed cloning of Text objects</span>

<span class="s0"># Version 1.6</span>
<span class="s0">#     Fixed Entry so StringVar uses _root as master, solves weird</span>
<span class="s0">#            interaction with shell in Idle</span>
<span class="s0">#     Fixed bug in setCoords. X and Y coordinates can increase in</span>
<span class="s0">#           &quot;non-intuitive&quot; direction.</span>
<span class="s0">#     Tweaked wm_protocol so window is not resizable and kill box closes.</span>

<span class="s0"># Version 1.5</span>
<span class="s0">#     Fixed bug in Entry. Can now define entry before creating a</span>
<span class="s0">#     GraphWin. All GraphWins are now toplevel windows and share</span>
<span class="s0">#     a fixed root (called _root).</span>

<span class="s0"># Version 1.4</span>
<span class="s0">#     Fixed Garbage collection of Tkinter images bug.</span>
<span class="s0">#     Added ability to set text atttributes.</span>
<span class="s0">#     Added Entry boxes.</span>

<span class="s4">import </span><span class="s1">time</span><span class="s4">, </span><span class="s1">os</span><span class="s4">, </span><span class="s1">sys</span>

<span class="s4">try</span><span class="s1">:  </span><span class="s0"># import as appropriate for 2.x vs. 3.x</span>
    <span class="s4">import </span><span class="s1">tkinter </span><span class="s4">as </span><span class="s1">tk</span>
<span class="s4">except</span><span class="s1">:</span>
    <span class="s4">import </span><span class="s1">Tkinter </span><span class="s4">as </span><span class="s1">tk</span>


<span class="s0">##########################################################################</span>
<span class="s0"># Module Exceptions</span>

<span class="s4">class </span><span class="s1">GraphicsError(Exception):</span>
    <span class="s2">&quot;&quot;&quot;Generic error class for graphics module exceptions.&quot;&quot;&quot;</span>
    <span class="s4">pass</span>


<span class="s1">OBJ_ALREADY_DRAWN = </span><span class="s3">&quot;Object currently drawn&quot;</span>
<span class="s1">UNSUPPORTED_METHOD = </span><span class="s3">&quot;Object doesn't support operation&quot;</span>
<span class="s1">BAD_OPTION = </span><span class="s3">&quot;Illegal option value&quot;</span>

<span class="s0">##########################################################################</span>
<span class="s0"># global variables and funtions</span>

<span class="s1">_root = tk.Tk()</span>
<span class="s1">_root.withdraw()</span>

<span class="s1">_update_lasttime = time.time()</span>


<span class="s4">def </span><span class="s1">update(rate=</span><span class="s4">None</span><span class="s1">):</span>
    <span class="s4">global </span><span class="s1">_update_lasttime</span>
    <span class="s4">if </span><span class="s1">rate:</span>
        <span class="s1">now = time.time()</span>
        <span class="s1">pauseLength = </span><span class="s5">1 </span><span class="s1">/ rate - (now - _update_lasttime)</span>
        <span class="s4">if </span><span class="s1">pauseLength &gt; </span><span class="s5">0</span><span class="s1">:</span>
            <span class="s1">time.sleep(pauseLength)</span>
            <span class="s1">_update_lasttime = now + pauseLength</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s1">_update_lasttime = now</span>

    <span class="s1">_root.update()</span>


<span class="s0">############################################################################</span>
<span class="s0"># Graphics classes start here</span>

<span class="s4">class </span><span class="s1">GraphWin(tk.Canvas):</span>
    <span class="s2">&quot;&quot;&quot;A GraphWin is a toplevel window for displaying graphics.&quot;&quot;&quot;</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">title=</span><span class="s3">&quot;Graphics Window&quot;</span><span class="s4">,</span>
                 <span class="s1">width=</span><span class="s5">200</span><span class="s4">, </span><span class="s1">height=</span><span class="s5">200</span><span class="s4">, </span><span class="s1">autoflush=</span><span class="s4">True</span><span class="s1">):</span>
        <span class="s4">assert </span><span class="s1">type(title) == type(</span><span class="s3">&quot;&quot;</span><span class="s1">)</span><span class="s4">, </span><span class="s3">&quot;Title must be a string&quot;</span>
        <span class="s1">master = tk.Toplevel(_root)</span>
        <span class="s1">master.protocol(</span><span class="s3">&quot;WM_DELETE_WINDOW&quot;</span><span class="s4">, </span><span class="s1">self.close)</span>
        <span class="s1">tk.Canvas.__init__(self</span><span class="s4">, </span><span class="s1">master</span><span class="s4">, </span><span class="s1">width=width</span><span class="s4">, </span><span class="s1">height=height</span><span class="s4">,</span>
                           <span class="s1">highlightthickness=</span><span class="s5">0</span><span class="s4">, </span><span class="s1">bd=</span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.master.title(title)</span>
        <span class="s1">self.pack()</span>
        <span class="s1">master.resizable(</span><span class="s5">0</span><span class="s4">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.foreground = </span><span class="s3">&quot;black&quot;</span>
        <span class="s1">self.items = []</span>
        <span class="s1">self.mouseX = </span><span class="s4">None</span>
        <span class="s1">self.mouseY = </span><span class="s4">None</span>
        <span class="s1">self.bind(</span><span class="s3">&quot;&lt;Button-1&gt;&quot;</span><span class="s4">, </span><span class="s1">self._onClick)</span>
        <span class="s1">self.bind_all(</span><span class="s3">&quot;&lt;Key&gt;&quot;</span><span class="s4">, </span><span class="s1">self._onKey)</span>
        <span class="s1">self.height = int(height)</span>
        <span class="s1">self.width = int(width)</span>
        <span class="s1">self.autoflush = autoflush</span>
        <span class="s1">self._mouseCallback = </span><span class="s4">None</span>
        <span class="s1">self.trans = </span><span class="s4">None</span>
        <span class="s1">self.closed = </span><span class="s4">False</span>
        <span class="s1">master.lift()</span>
        <span class="s1">self.lastKey = </span><span class="s3">&quot;&quot;</span>
        <span class="s4">if </span><span class="s1">autoflush: _root.update()</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">if </span><span class="s1">self.isClosed():</span>
            <span class="s4">return </span><span class="s3">&quot;&lt;Closed GraphWin&gt;&quot;</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">return </span><span class="s3">&quot;GraphWin('{}', {}, {})&quot;</span><span class="s1">.format(self.master.title()</span><span class="s4">,</span>
                                                   <span class="s1">self.getWidth()</span><span class="s4">,</span>
                                                   <span class="s1">self.getHeight())</span>

    <span class="s4">def </span><span class="s1">__str__(self):</span>
        <span class="s4">return </span><span class="s1">repr(self)</span>

    <span class="s4">def </span><span class="s1">__checkOpen(self):</span>
        <span class="s4">if </span><span class="s1">self.closed:</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(</span><span class="s3">&quot;window is closed&quot;</span><span class="s1">)</span>

    <span class="s4">def </span><span class="s1">_onKey(self</span><span class="s4">, </span><span class="s1">evnt):</span>
        <span class="s1">self.lastKey = evnt.keysym</span>

    <span class="s4">def </span><span class="s1">setBackground(self</span><span class="s4">, </span><span class="s1">color):</span>
        <span class="s2">&quot;&quot;&quot;Set background color of the window&quot;&quot;&quot;</span>
        <span class="s1">self.__checkOpen()</span>
        <span class="s1">self.config(bg=color)</span>
        <span class="s1">self.__autoflush()</span>

    <span class="s4">def </span><span class="s1">setCoords(self</span><span class="s4">, </span><span class="s1">x1</span><span class="s4">, </span><span class="s1">y1</span><span class="s4">, </span><span class="s1">x2</span><span class="s4">, </span><span class="s1">y2):</span>
        <span class="s2">&quot;&quot;&quot;Set coordinates of window to run from (x1,y1) in the 
        lower-left corner to (x2,y2) in the upper-right corner.&quot;&quot;&quot;</span>
        <span class="s1">self.trans = Transform(self.width</span><span class="s4">, </span><span class="s1">self.height</span><span class="s4">, </span><span class="s1">x1</span><span class="s4">, </span><span class="s1">y1</span><span class="s4">, </span><span class="s1">x2</span><span class="s4">, </span><span class="s1">y2)</span>
        <span class="s1">self.redraw()</span>

    <span class="s4">def </span><span class="s1">close(self):</span>
        <span class="s2">&quot;&quot;&quot;Close the window&quot;&quot;&quot;</span>

        <span class="s4">if </span><span class="s1">self.closed: </span><span class="s4">return</span>
        <span class="s1">self.closed = </span><span class="s4">True</span>
        <span class="s1">self.master.destroy()</span>
        <span class="s1">self.__autoflush()</span>

    <span class="s4">def </span><span class="s1">isClosed(self):</span>
        <span class="s4">return </span><span class="s1">self.closed</span>

    <span class="s4">def </span><span class="s1">isOpen(self):</span>
        <span class="s4">return not </span><span class="s1">self.closed</span>

    <span class="s4">def </span><span class="s1">__autoflush(self):</span>
        <span class="s4">if </span><span class="s1">self.autoflush:</span>
            <span class="s1">_root.update()</span>

    <span class="s4">def </span><span class="s1">plot(self</span><span class="s4">, </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">color=</span><span class="s3">&quot;black&quot;</span><span class="s1">):</span>
        <span class="s2">&quot;&quot;&quot;Set pixel (x,y) to the given color&quot;&quot;&quot;</span>
        <span class="s1">self.__checkOpen()</span>
        <span class="s1">xs</span><span class="s4">, </span><span class="s1">ys = self.toScreen(x</span><span class="s4">, </span><span class="s1">y)</span>
        <span class="s1">self.create_line(xs</span><span class="s4">, </span><span class="s1">ys</span><span class="s4">, </span><span class="s1">xs + </span><span class="s5">1</span><span class="s4">, </span><span class="s1">ys</span><span class="s4">, </span><span class="s1">fill=color)</span>
        <span class="s1">self.__autoflush()</span>

    <span class="s4">def </span><span class="s1">plotPixel(self</span><span class="s4">, </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">color=</span><span class="s3">&quot;black&quot;</span><span class="s1">):</span>
        <span class="s2">&quot;&quot;&quot;Set pixel raw (independent of window coordinates) pixel 
        (x,y) to color&quot;&quot;&quot;</span>
        <span class="s1">self.__checkOpen()</span>
        <span class="s1">self.create_line(x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">x + </span><span class="s5">1</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">fill=color)</span>
        <span class="s1">self.__autoflush()</span>

    <span class="s4">def </span><span class="s1">flush(self):</span>
        <span class="s2">&quot;&quot;&quot;Update drawing to the window&quot;&quot;&quot;</span>
        <span class="s1">self.__checkOpen()</span>
        <span class="s1">self.update_idletasks()</span>

    <span class="s4">def </span><span class="s1">getMouse(self):</span>
        <span class="s2">&quot;&quot;&quot;Wait for mouse click and return Point object representing 
        the click&quot;&quot;&quot;</span>
        <span class="s1">self.update()  </span><span class="s0"># flush any prior clicks</span>
        <span class="s1">self.mouseX = </span><span class="s4">None</span>
        <span class="s1">self.mouseY = </span><span class="s4">None</span>
        <span class="s4">while </span><span class="s1">self.mouseX == </span><span class="s4">None or </span><span class="s1">self.mouseY == </span><span class="s4">None</span><span class="s1">:</span>
            <span class="s1">self.update()</span>
            <span class="s4">if </span><span class="s1">self.isClosed(): </span><span class="s4">raise </span><span class="s1">GraphicsError(</span><span class="s3">&quot;getMouse in closed window&quot;</span><span class="s1">)</span>
            <span class="s1">time.sleep(</span><span class="s5">.1</span><span class="s1">)  </span><span class="s0"># give up thread</span>
        <span class="s1">x</span><span class="s4">, </span><span class="s1">y = self.toWorld(self.mouseX</span><span class="s4">, </span><span class="s1">self.mouseY)</span>
        <span class="s1">self.mouseX = </span><span class="s4">None</span>
        <span class="s1">self.mouseY = </span><span class="s4">None</span>
        <span class="s4">return </span><span class="s1">Point(x</span><span class="s4">, </span><span class="s1">y)</span>

    <span class="s4">def </span><span class="s1">checkMouse(self):</span>
        <span class="s2">&quot;&quot;&quot;Return last mouse click or None if mouse has 
        not been clicked since last call&quot;&quot;&quot;</span>
        <span class="s4">if </span><span class="s1">self.isClosed():</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(</span><span class="s3">&quot;checkMouse in closed window&quot;</span><span class="s1">)</span>
        <span class="s1">self.update()</span>
        <span class="s4">if </span><span class="s1">self.mouseX != </span><span class="s4">None and </span><span class="s1">self.mouseY != </span><span class="s4">None</span><span class="s1">:</span>
            <span class="s1">x</span><span class="s4">, </span><span class="s1">y = self.toWorld(self.mouseX</span><span class="s4">, </span><span class="s1">self.mouseY)</span>
            <span class="s1">self.mouseX = </span><span class="s4">None</span>
            <span class="s1">self.mouseY = </span><span class="s4">None</span>
            <span class="s4">return </span><span class="s1">Point(x</span><span class="s4">, </span><span class="s1">y)</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">return None</span>

    <span class="s4">def </span><span class="s1">getKey(self):</span>
        <span class="s2">&quot;&quot;&quot;Wait for user to press a key and return it as a string.&quot;&quot;&quot;</span>
        <span class="s1">self.lastKey = </span><span class="s3">&quot;&quot;</span>
        <span class="s4">while </span><span class="s1">self.lastKey == </span><span class="s3">&quot;&quot;</span><span class="s1">:</span>
            <span class="s1">self.update()</span>
            <span class="s4">if </span><span class="s1">self.isClosed(): </span><span class="s4">raise </span><span class="s1">GraphicsError(</span><span class="s3">&quot;getKey in closed window&quot;</span><span class="s1">)</span>
            <span class="s1">time.sleep(</span><span class="s5">.1</span><span class="s1">)  </span><span class="s0"># give up thread</span>

        <span class="s1">key = self.lastKey</span>
        <span class="s1">self.lastKey = </span><span class="s3">&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">key</span>

    <span class="s4">def </span><span class="s1">checkKey(self):</span>
        <span class="s2">&quot;&quot;&quot;Return last key pressed or None if no key pressed since last call&quot;&quot;&quot;</span>
        <span class="s4">if </span><span class="s1">self.isClosed():</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(</span><span class="s3">&quot;checkKey in closed window&quot;</span><span class="s1">)</span>
        <span class="s1">self.update()</span>
        <span class="s1">key = self.lastKey</span>
        <span class="s1">self.lastKey = </span><span class="s3">&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">key</span>

    <span class="s4">def </span><span class="s1">getHeight(self):</span>
        <span class="s2">&quot;&quot;&quot;Return the height of the window&quot;&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">self.height</span>

    <span class="s4">def </span><span class="s1">getWidth(self):</span>
        <span class="s2">&quot;&quot;&quot;Return the width of the window&quot;&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">self.width</span>

    <span class="s4">def </span><span class="s1">toScreen(self</span><span class="s4">, </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y):</span>
        <span class="s1">trans = self.trans</span>
        <span class="s4">if </span><span class="s1">trans:</span>
            <span class="s4">return </span><span class="s1">self.trans.screen(x</span><span class="s4">, </span><span class="s1">y)</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">return </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y</span>

    <span class="s4">def </span><span class="s1">toWorld(self</span><span class="s4">, </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y):</span>
        <span class="s1">trans = self.trans</span>
        <span class="s4">if </span><span class="s1">trans:</span>
            <span class="s4">return </span><span class="s1">self.trans.world(x</span><span class="s4">, </span><span class="s1">y)</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">return </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y</span>

    <span class="s4">def </span><span class="s1">setMouseHandler(self</span><span class="s4">, </span><span class="s1">func):</span>
        <span class="s1">self._mouseCallback = func</span>

    <span class="s4">def </span><span class="s1">_onClick(self</span><span class="s4">, </span><span class="s1">e):</span>
        <span class="s1">self.mouseX = e.x</span>
        <span class="s1">self.mouseY = e.y</span>
        <span class="s4">if </span><span class="s1">self._mouseCallback:</span>
            <span class="s1">self._mouseCallback(Point(e.x</span><span class="s4">, </span><span class="s1">e.y))</span>

    <span class="s4">def </span><span class="s1">addItem(self</span><span class="s4">, </span><span class="s1">item):</span>
        <span class="s1">self.items.append(item)</span>

    <span class="s4">def </span><span class="s1">delItem(self</span><span class="s4">, </span><span class="s1">item):</span>
        <span class="s1">self.items.remove(item)</span>

    <span class="s4">def </span><span class="s1">redraw(self):</span>
        <span class="s4">for </span><span class="s1">item </span><span class="s4">in </span><span class="s1">self.items[:]:</span>
            <span class="s1">item.undraw()</span>
            <span class="s1">item.draw(self)</span>
        <span class="s1">self.update()</span>


<span class="s4">class </span><span class="s1">Transform:</span>
    <span class="s2">&quot;&quot;&quot;Internal class for 2-D coordinate transformations&quot;&quot;&quot;</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">w</span><span class="s4">, </span><span class="s1">h</span><span class="s4">, </span><span class="s1">xlow</span><span class="s4">, </span><span class="s1">ylow</span><span class="s4">, </span><span class="s1">xhigh</span><span class="s4">, </span><span class="s1">yhigh):</span>
        <span class="s0"># w, h are width and height of window</span>
        <span class="s0"># (xlow,ylow) coordinates of lower-left [raw (0,h-1)]</span>
        <span class="s0"># (xhigh,yhigh) coordinates of upper-right [raw (w-1,0)]</span>
        <span class="s1">xspan = (xhigh - xlow)</span>
        <span class="s1">yspan = (yhigh - ylow)</span>
        <span class="s1">self.xbase = xlow</span>
        <span class="s1">self.ybase = yhigh</span>
        <span class="s1">self.xscale = xspan / float(w - </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.yscale = yspan / float(h - </span><span class="s5">1</span><span class="s1">)</span>

    <span class="s4">def </span><span class="s1">screen(self</span><span class="s4">, </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y):</span>
        <span class="s0"># Returns x,y in screen (actually window) coordinates</span>
        <span class="s1">xs = (x - self.xbase) / self.xscale</span>
        <span class="s1">ys = (self.ybase - y) / self.yscale</span>
        <span class="s4">return </span><span class="s1">int(xs + </span><span class="s5">0.5</span><span class="s1">)</span><span class="s4">, </span><span class="s1">int(ys + </span><span class="s5">0.5</span><span class="s1">)</span>

    <span class="s4">def </span><span class="s1">world(self</span><span class="s4">, </span><span class="s1">xs</span><span class="s4">, </span><span class="s1">ys):</span>
        <span class="s0"># Returns xs,ys in world coordinates</span>
        <span class="s1">x = xs * self.xscale + self.xbase</span>
        <span class="s1">y = self.ybase - ys * self.yscale</span>
        <span class="s4">return </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y</span>


<span class="s0"># Default values for various item configuration options. Only a subset of</span>
<span class="s0">#   keys may be present in the configuration dictionary for a given item</span>
<span class="s1">DEFAULT_CONFIG = {</span><span class="s3">&quot;fill&quot;</span><span class="s1">: </span><span class="s3">&quot;&quot;</span><span class="s4">,</span>
                  <span class="s3">&quot;outline&quot;</span><span class="s1">: </span><span class="s3">&quot;black&quot;</span><span class="s4">,</span>
                  <span class="s3">&quot;width&quot;</span><span class="s1">: </span><span class="s3">&quot;1&quot;</span><span class="s4">,</span>
                  <span class="s3">&quot;arrow&quot;</span><span class="s1">: </span><span class="s3">&quot;none&quot;</span><span class="s4">,</span>
                  <span class="s3">&quot;text&quot;</span><span class="s1">: </span><span class="s3">&quot;&quot;</span><span class="s4">,</span>
                  <span class="s3">&quot;justify&quot;</span><span class="s1">: </span><span class="s3">&quot;center&quot;</span><span class="s4">,</span>
                  <span class="s3">&quot;font&quot;</span><span class="s1">: (</span><span class="s3">&quot;helvetica&quot;</span><span class="s4">, </span><span class="s5">12</span><span class="s4">, </span><span class="s3">&quot;normal&quot;</span><span class="s1">)}</span>


<span class="s4">class </span><span class="s1">GraphicsObject:</span>
    <span class="s2">&quot;&quot;&quot;Generic base class for all of the drawable objects&quot;&quot;&quot;</span>

    <span class="s0"># A subclass of GraphicsObject should override _draw and</span>
    <span class="s0">#   and _move methods.</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s0"># options is a list of strings indicating which options are</span>
        <span class="s0"># legal for this object.</span>

        <span class="s0"># When an object is drawn, canvas is set to the GraphWin(canvas)</span>
        <span class="s0">#    object where it is drawn and id is the TK identifier of the</span>
        <span class="s0">#    drawn shape.</span>
        <span class="s1">self.canvas = </span><span class="s4">None</span>
        <span class="s1">self.id = </span><span class="s4">None</span>

        <span class="s0"># config is the dictionary of configuration options for the widget.</span>
        <span class="s1">config = {}</span>
        <span class="s4">for </span><span class="s1">option </span><span class="s4">in </span><span class="s1">options:</span>
            <span class="s1">config[option] = DEFAULT_CONFIG[option]</span>
        <span class="s1">self.config = config</span>

    <span class="s4">def </span><span class="s1">setFill(self</span><span class="s4">, </span><span class="s1">color):</span>
        <span class="s2">&quot;&quot;&quot;Set interior color to color&quot;&quot;&quot;</span>
        <span class="s1">self._reconfig(</span><span class="s3">&quot;fill&quot;</span><span class="s4">, </span><span class="s1">color)</span>

    <span class="s4">def </span><span class="s1">setOutline(self</span><span class="s4">, </span><span class="s1">color):</span>
        <span class="s2">&quot;&quot;&quot;Set outline color to color&quot;&quot;&quot;</span>
        <span class="s1">self._reconfig(</span><span class="s3">&quot;outline&quot;</span><span class="s4">, </span><span class="s1">color)</span>

    <span class="s4">def </span><span class="s1">setWidth(self</span><span class="s4">, </span><span class="s1">width):</span>
        <span class="s2">&quot;&quot;&quot;Set line weight to width&quot;&quot;&quot;</span>
        <span class="s1">self._reconfig(</span><span class="s3">&quot;width&quot;</span><span class="s4">, </span><span class="s1">width)</span>

    <span class="s4">def </span><span class="s1">draw(self</span><span class="s4">, </span><span class="s1">graphwin):</span>

        <span class="s2">&quot;&quot;&quot;Draw the object in graphwin, which should be a GraphWin 
        object.  A GraphicsObject may only be drawn into one 
        window. Raises an error if attempt made to draw an object that 
        is already visible.&quot;&quot;&quot;</span>

        <span class="s4">if </span><span class="s1">self.canvas </span><span class="s4">and not </span><span class="s1">self.canvas.isClosed(): </span><span class="s4">raise </span><span class="s1">GraphicsError(OBJ_ALREADY_DRAWN)</span>
        <span class="s4">if </span><span class="s1">graphwin.isClosed(): </span><span class="s4">raise </span><span class="s1">GraphicsError(</span><span class="s3">&quot;Can't draw to closed window&quot;</span><span class="s1">)</span>
        <span class="s1">self.canvas = graphwin</span>
        <span class="s1">self.id = self._draw(graphwin</span><span class="s4">, </span><span class="s1">self.config)</span>
        <span class="s1">graphwin.addItem(self)</span>
        <span class="s4">if </span><span class="s1">graphwin.autoflush:</span>
            <span class="s1">_root.update()</span>
        <span class="s4">return </span><span class="s1">self</span>

    <span class="s4">def </span><span class="s1">undraw(self):</span>

        <span class="s2">&quot;&quot;&quot;Undraw the object (i.e. hide it). Returns silently if the 
        object is not currently drawn.&quot;&quot;&quot;</span>

        <span class="s4">if not </span><span class="s1">self.canvas: </span><span class="s4">return</span>
        <span class="s4">if not </span><span class="s1">self.canvas.isClosed():</span>
            <span class="s1">self.canvas.delete(self.id)</span>
            <span class="s1">self.canvas.delItem(self)</span>
            <span class="s4">if </span><span class="s1">self.canvas.autoflush:</span>
                <span class="s1">_root.update()</span>
        <span class="s1">self.canvas = </span><span class="s4">None</span>
        <span class="s1">self.id = </span><span class="s4">None</span>

    <span class="s4">def </span><span class="s1">move(self</span><span class="s4">, </span><span class="s1">dx</span><span class="s4">, </span><span class="s1">dy):</span>

        <span class="s2">&quot;&quot;&quot;move object dx units in x direction and dy units in y 
        direction&quot;&quot;&quot;</span>

        <span class="s1">self._move(dx</span><span class="s4">, </span><span class="s1">dy)</span>
        <span class="s1">canvas = self.canvas</span>
        <span class="s4">if </span><span class="s1">canvas </span><span class="s4">and not </span><span class="s1">canvas.isClosed():</span>
            <span class="s1">trans = canvas.trans</span>
            <span class="s4">if </span><span class="s1">trans:</span>
                <span class="s1">x = dx / trans.xscale</span>
                <span class="s1">y = -dy / trans.yscale</span>
            <span class="s4">else</span><span class="s1">:</span>
                <span class="s1">x = dx</span>
                <span class="s1">y = dy</span>
            <span class="s1">self.canvas.move(self.id</span><span class="s4">, </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y)</span>
            <span class="s4">if </span><span class="s1">canvas.autoflush:</span>
                <span class="s1">_root.update()</span>

    <span class="s4">def </span><span class="s1">_reconfig(self</span><span class="s4">, </span><span class="s1">option</span><span class="s4">, </span><span class="s1">setting):</span>
        <span class="s0"># Internal method for changing configuration of the object</span>
        <span class="s0"># Raises an error if the option does not exist in the config</span>
        <span class="s0">#    dictionary for this object</span>
        <span class="s4">if </span><span class="s1">option </span><span class="s4">not in </span><span class="s1">self.config:</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(UNSUPPORTED_METHOD)</span>
        <span class="s1">options = self.config</span>
        <span class="s1">options[option] = setting</span>
        <span class="s4">if </span><span class="s1">self.canvas </span><span class="s4">and not </span><span class="s1">self.canvas.isClosed():</span>
            <span class="s1">self.canvas.itemconfig(self.id</span><span class="s4">, </span><span class="s1">options)</span>
            <span class="s4">if </span><span class="s1">self.canvas.autoflush:</span>
                <span class="s1">_root.update()</span>

    <span class="s4">def </span><span class="s1">_draw(self</span><span class="s4">, </span><span class="s1">canvas</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s2">&quot;&quot;&quot;draws appropriate figure on canvas with options provided 
        Returns Tk id of item drawn&quot;&quot;&quot;</span>
        <span class="s4">pass  </span><span class="s0"># must override in subclass</span>

    <span class="s4">def </span><span class="s1">_move(self</span><span class="s4">, </span><span class="s1">dx</span><span class="s4">, </span><span class="s1">dy):</span>
        <span class="s2">&quot;&quot;&quot;updates internal state of object to move it dx,dy units&quot;&quot;&quot;</span>
        <span class="s4">pass  </span><span class="s0"># must override in subclass</span>


<span class="s4">class </span><span class="s1">Point(GraphicsObject):</span>
    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y):</span>
        <span class="s1">GraphicsObject.__init__(self</span><span class="s4">, </span><span class="s1">[</span><span class="s3">&quot;outline&quot;</span><span class="s4">, </span><span class="s3">&quot;fill&quot;</span><span class="s1">])</span>
        <span class="s1">self.setFill = self.setOutline</span>
        <span class="s1">self.x = float(x)</span>
        <span class="s1">self.y = float(y)</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">return </span><span class="s3">&quot;Point({}, {})&quot;</span><span class="s1">.format(self.x</span><span class="s4">, </span><span class="s1">self.y)</span>

    <span class="s4">def </span><span class="s1">_draw(self</span><span class="s4">, </span><span class="s1">canvas</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s1">x</span><span class="s4">, </span><span class="s1">y = canvas.toScreen(self.x</span><span class="s4">, </span><span class="s1">self.y)</span>
        <span class="s4">return </span><span class="s1">canvas.create_rectangle(x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">x + </span><span class="s5">1</span><span class="s4">, </span><span class="s1">y + </span><span class="s5">1</span><span class="s4">, </span><span class="s1">options)</span>

    <span class="s4">def </span><span class="s1">_move(self</span><span class="s4">, </span><span class="s1">dx</span><span class="s4">, </span><span class="s1">dy):</span>
        <span class="s1">self.x = self.x + dx</span>
        <span class="s1">self.y = self.y + dy</span>

    <span class="s4">def </span><span class="s1">clone(self):</span>
        <span class="s1">other = Point(self.x</span><span class="s4">, </span><span class="s1">self.y)</span>
        <span class="s1">other.config = self.config.copy()</span>
        <span class="s4">return </span><span class="s1">other</span>

    <span class="s4">def </span><span class="s1">getX(self): </span><span class="s4">return </span><span class="s1">self.x</span>

    <span class="s4">def </span><span class="s1">getY(self): </span><span class="s4">return </span><span class="s1">self.y</span>


<span class="s4">class </span><span class="s1">_BBox(GraphicsObject):</span>
    <span class="s0"># Internal base class for objects represented by bounding box</span>
    <span class="s0"># (opposite corners) Line segment is a degenerate case.</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">p1</span><span class="s4">, </span><span class="s1">p2</span><span class="s4">, </span><span class="s1">options=[</span><span class="s3">&quot;outline&quot;</span><span class="s4">, </span><span class="s3">&quot;width&quot;</span><span class="s4">, </span><span class="s3">&quot;fill&quot;</span><span class="s1">]):</span>
        <span class="s1">GraphicsObject.__init__(self</span><span class="s4">, </span><span class="s1">options)</span>
        <span class="s1">self.p1 = p1.clone()</span>
        <span class="s1">self.p2 = p2.clone()</span>

    <span class="s4">def </span><span class="s1">_move(self</span><span class="s4">, </span><span class="s1">dx</span><span class="s4">, </span><span class="s1">dy):</span>
        <span class="s1">self.p1.x = self.p1.x + dx</span>
        <span class="s1">self.p1.y = self.p1.y + dy</span>
        <span class="s1">self.p2.x = self.p2.x + dx</span>
        <span class="s1">self.p2.y = self.p2.y + dy</span>

    <span class="s4">def </span><span class="s1">getP1(self): </span><span class="s4">return </span><span class="s1">self.p1.clone()</span>

    <span class="s4">def </span><span class="s1">getP2(self): </span><span class="s4">return </span><span class="s1">self.p2.clone()</span>

    <span class="s4">def </span><span class="s1">getCenter(self):</span>
        <span class="s1">p1 = self.p1</span>
        <span class="s1">p2 = self.p2</span>
        <span class="s4">return </span><span class="s1">Point((p1.x + p2.x) / </span><span class="s5">2.0</span><span class="s4">, </span><span class="s1">(p1.y + p2.y) / </span><span class="s5">2.0</span><span class="s1">)</span>


<span class="s4">class </span><span class="s1">Rectangle(_BBox):</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">p1</span><span class="s4">, </span><span class="s1">p2):</span>
        <span class="s1">_BBox.__init__(self</span><span class="s4">, </span><span class="s1">p1</span><span class="s4">, </span><span class="s1">p2)</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">return </span><span class="s3">&quot;Rectangle({}, {})&quot;</span><span class="s1">.format(str(self.p1)</span><span class="s4">, </span><span class="s1">str(self.p2))</span>

    <span class="s4">def </span><span class="s1">_draw(self</span><span class="s4">, </span><span class="s1">canvas</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s1">p1 = self.p1</span>
        <span class="s1">p2 = self.p2</span>
        <span class="s1">x1</span><span class="s4">, </span><span class="s1">y1 = canvas.toScreen(p1.x</span><span class="s4">, </span><span class="s1">p1.y)</span>
        <span class="s1">x2</span><span class="s4">, </span><span class="s1">y2 = canvas.toScreen(p2.x</span><span class="s4">, </span><span class="s1">p2.y)</span>
        <span class="s4">return </span><span class="s1">canvas.create_rectangle(x1</span><span class="s4">, </span><span class="s1">y1</span><span class="s4">, </span><span class="s1">x2</span><span class="s4">, </span><span class="s1">y2</span><span class="s4">, </span><span class="s1">options)</span>

    <span class="s4">def </span><span class="s1">clone(self):</span>
        <span class="s1">other = Rectangle(self.p1</span><span class="s4">, </span><span class="s1">self.p2)</span>
        <span class="s1">other.config = self.config.copy()</span>
        <span class="s4">return </span><span class="s1">other</span>


<span class="s4">class </span><span class="s1">Oval(_BBox):</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">p1</span><span class="s4">, </span><span class="s1">p2):</span>
        <span class="s1">_BBox.__init__(self</span><span class="s4">, </span><span class="s1">p1</span><span class="s4">, </span><span class="s1">p2)</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">return </span><span class="s3">&quot;Oval({}, {})&quot;</span><span class="s1">.format(str(self.p1)</span><span class="s4">, </span><span class="s1">str(self.p2))</span>

    <span class="s4">def </span><span class="s1">clone(self):</span>
        <span class="s1">other = Oval(self.p1</span><span class="s4">, </span><span class="s1">self.p2)</span>
        <span class="s1">other.config = self.config.copy()</span>
        <span class="s4">return </span><span class="s1">other</span>

    <span class="s4">def </span><span class="s1">_draw(self</span><span class="s4">, </span><span class="s1">canvas</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s1">p1 = self.p1</span>
        <span class="s1">p2 = self.p2</span>
        <span class="s1">x1</span><span class="s4">, </span><span class="s1">y1 = canvas.toScreen(p1.x</span><span class="s4">, </span><span class="s1">p1.y)</span>
        <span class="s1">x2</span><span class="s4">, </span><span class="s1">y2 = canvas.toScreen(p2.x</span><span class="s4">, </span><span class="s1">p2.y)</span>
        <span class="s4">return </span><span class="s1">canvas.create_oval(x1</span><span class="s4">, </span><span class="s1">y1</span><span class="s4">, </span><span class="s1">x2</span><span class="s4">, </span><span class="s1">y2</span><span class="s4">, </span><span class="s1">options)</span>


<span class="s4">class </span><span class="s1">Circle(Oval):</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">center</span><span class="s4">, </span><span class="s1">radius):</span>
        <span class="s1">p1 = Point(center.x - radius</span><span class="s4">, </span><span class="s1">center.y - radius)</span>
        <span class="s1">p2 = Point(center.x + radius</span><span class="s4">, </span><span class="s1">center.y + radius)</span>
        <span class="s1">Oval.__init__(self</span><span class="s4">, </span><span class="s1">p1</span><span class="s4">, </span><span class="s1">p2)</span>
        <span class="s1">self.radius = radius</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">return </span><span class="s3">&quot;Circle({}, {})&quot;</span><span class="s1">.format(str(self.getCenter())</span><span class="s4">, </span><span class="s1">str(self.radius))</span>

    <span class="s4">def </span><span class="s1">clone(self):</span>
        <span class="s1">other = Circle(self.getCenter()</span><span class="s4">, </span><span class="s1">self.radius)</span>
        <span class="s1">other.config = self.config.copy()</span>
        <span class="s4">return </span><span class="s1">other</span>

    <span class="s4">def </span><span class="s1">getRadius(self):</span>
        <span class="s4">return </span><span class="s1">self.radius</span>


<span class="s4">class </span><span class="s1">Line(_BBox):</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">p1</span><span class="s4">, </span><span class="s1">p2):</span>
        <span class="s1">_BBox.__init__(self</span><span class="s4">, </span><span class="s1">p1</span><span class="s4">, </span><span class="s1">p2</span><span class="s4">, </span><span class="s1">[</span><span class="s3">&quot;arrow&quot;</span><span class="s4">, </span><span class="s3">&quot;fill&quot;</span><span class="s4">, </span><span class="s3">&quot;width&quot;</span><span class="s1">])</span>
        <span class="s1">self.setFill(DEFAULT_CONFIG[</span><span class="s3">'outline'</span><span class="s1">])</span>
        <span class="s1">self.setOutline = self.setFill</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">return </span><span class="s3">&quot;Line({}, {})&quot;</span><span class="s1">.format(str(self.p1)</span><span class="s4">, </span><span class="s1">str(self.p2))</span>

    <span class="s4">def </span><span class="s1">clone(self):</span>
        <span class="s1">other = Line(self.p1</span><span class="s4">, </span><span class="s1">self.p2)</span>
        <span class="s1">other.config = self.config.copy()</span>
        <span class="s4">return </span><span class="s1">other</span>

    <span class="s4">def </span><span class="s1">_draw(self</span><span class="s4">, </span><span class="s1">canvas</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s1">p1 = self.p1</span>
        <span class="s1">p2 = self.p2</span>
        <span class="s1">x1</span><span class="s4">, </span><span class="s1">y1 = canvas.toScreen(p1.x</span><span class="s4">, </span><span class="s1">p1.y)</span>
        <span class="s1">x2</span><span class="s4">, </span><span class="s1">y2 = canvas.toScreen(p2.x</span><span class="s4">, </span><span class="s1">p2.y)</span>
        <span class="s4">return </span><span class="s1">canvas.create_line(x1</span><span class="s4">, </span><span class="s1">y1</span><span class="s4">, </span><span class="s1">x2</span><span class="s4">, </span><span class="s1">y2</span><span class="s4">, </span><span class="s1">options)</span>

    <span class="s4">def </span><span class="s1">setArrow(self</span><span class="s4">, </span><span class="s1">option):</span>
        <span class="s4">if not </span><span class="s1">option </span><span class="s4">in </span><span class="s1">[</span><span class="s3">&quot;first&quot;</span><span class="s4">, </span><span class="s3">&quot;last&quot;</span><span class="s4">, </span><span class="s3">&quot;both&quot;</span><span class="s4">, </span><span class="s3">&quot;none&quot;</span><span class="s1">]:</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(BAD_OPTION)</span>
        <span class="s1">self._reconfig(</span><span class="s3">&quot;arrow&quot;</span><span class="s4">, </span><span class="s1">option)</span>


<span class="s4">class </span><span class="s1">Polygon(GraphicsObject):</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">*points):</span>
        <span class="s0"># if points passed as a list, extract it</span>
        <span class="s4">if </span><span class="s1">len(points) == </span><span class="s5">1 </span><span class="s4">and </span><span class="s1">type(points[</span><span class="s5">0</span><span class="s1">]) == type([]):</span>
            <span class="s1">points = points[</span><span class="s5">0</span><span class="s1">]</span>
        <span class="s1">self.points = list(map(Point.clone</span><span class="s4">, </span><span class="s1">points))</span>
        <span class="s1">GraphicsObject.__init__(self</span><span class="s4">, </span><span class="s1">[</span><span class="s3">&quot;outline&quot;</span><span class="s4">, </span><span class="s3">&quot;width&quot;</span><span class="s4">, </span><span class="s3">&quot;fill&quot;</span><span class="s1">])</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">return </span><span class="s3">&quot;Polygon&quot; </span><span class="s1">+ str(tuple(p </span><span class="s4">for </span><span class="s1">p </span><span class="s4">in </span><span class="s1">self.points))</span>

    <span class="s4">def </span><span class="s1">clone(self):</span>
        <span class="s1">other = Polygon(*self.points)</span>
        <span class="s1">other.config = self.config.copy()</span>
        <span class="s4">return </span><span class="s1">other</span>

    <span class="s4">def </span><span class="s1">getPoints(self):</span>
        <span class="s4">return </span><span class="s1">list(map(Point.clone</span><span class="s4">, </span><span class="s1">self.points))</span>

    <span class="s4">def </span><span class="s1">_move(self</span><span class="s4">, </span><span class="s1">dx</span><span class="s4">, </span><span class="s1">dy):</span>
        <span class="s4">for </span><span class="s1">p </span><span class="s4">in </span><span class="s1">self.points:</span>
            <span class="s1">p.move(dx</span><span class="s4">, </span><span class="s1">dy)</span>

    <span class="s4">def </span><span class="s1">_draw(self</span><span class="s4">, </span><span class="s1">canvas</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s1">args = [canvas]</span>
        <span class="s4">for </span><span class="s1">p </span><span class="s4">in </span><span class="s1">self.points:</span>
            <span class="s1">x</span><span class="s4">, </span><span class="s1">y = canvas.toScreen(p.x</span><span class="s4">, </span><span class="s1">p.y)</span>
            <span class="s1">args.append(x)</span>
            <span class="s1">args.append(y)</span>
        <span class="s1">args.append(options)</span>
        <span class="s4">return </span><span class="s1">GraphWin.create_polygon(*args)</span>


<span class="s4">class </span><span class="s1">Text(GraphicsObject):</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">p</span><span class="s4">, </span><span class="s1">text):</span>
        <span class="s1">GraphicsObject.__init__(self</span><span class="s4">, </span><span class="s1">[</span><span class="s3">&quot;justify&quot;</span><span class="s4">, </span><span class="s3">&quot;fill&quot;</span><span class="s4">, </span><span class="s3">&quot;text&quot;</span><span class="s4">, </span><span class="s3">&quot;font&quot;</span><span class="s1">])</span>
        <span class="s1">self.setText(text)</span>
        <span class="s1">self.anchor = p.clone()</span>
        <span class="s1">self.setFill(DEFAULT_CONFIG[</span><span class="s3">'outline'</span><span class="s1">])</span>
        <span class="s1">self.setOutline = self.setFill</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">return </span><span class="s3">&quot;Text({}, '{}')&quot;</span><span class="s1">.format(self.anchor</span><span class="s4">, </span><span class="s1">self.getText())</span>

    <span class="s4">def </span><span class="s1">_draw(self</span><span class="s4">, </span><span class="s1">canvas</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s1">p = self.anchor</span>
        <span class="s1">x</span><span class="s4">, </span><span class="s1">y = canvas.toScreen(p.x</span><span class="s4">, </span><span class="s1">p.y)</span>
        <span class="s4">return </span><span class="s1">canvas.create_text(x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">options)</span>

    <span class="s4">def </span><span class="s1">_move(self</span><span class="s4">, </span><span class="s1">dx</span><span class="s4">, </span><span class="s1">dy):</span>
        <span class="s1">self.anchor.move(dx</span><span class="s4">, </span><span class="s1">dy)</span>

    <span class="s4">def </span><span class="s1">clone(self):</span>
        <span class="s1">other = Text(self.anchor</span><span class="s4">, </span><span class="s1">self.config[</span><span class="s3">'text'</span><span class="s1">])</span>
        <span class="s1">other.config = self.config.copy()</span>
        <span class="s4">return </span><span class="s1">other</span>

    <span class="s4">def </span><span class="s1">setText(self</span><span class="s4">, </span><span class="s1">text):</span>
        <span class="s1">self._reconfig(</span><span class="s3">&quot;text&quot;</span><span class="s4">, </span><span class="s1">text)</span>

    <span class="s4">def </span><span class="s1">getText(self):</span>
        <span class="s4">return </span><span class="s1">self.config[</span><span class="s3">&quot;text&quot;</span><span class="s1">]</span>

    <span class="s4">def </span><span class="s1">getAnchor(self):</span>
        <span class="s4">return </span><span class="s1">self.anchor.clone()</span>

    <span class="s4">def </span><span class="s1">setFace(self</span><span class="s4">, </span><span class="s1">face):</span>
        <span class="s4">if </span><span class="s1">face </span><span class="s4">in </span><span class="s1">[</span><span class="s3">'helvetica'</span><span class="s4">, </span><span class="s3">'arial'</span><span class="s4">, </span><span class="s3">'courier'</span><span class="s4">, </span><span class="s3">'times roman'</span><span class="s1">]:</span>
            <span class="s1">f</span><span class="s4">, </span><span class="s1">s</span><span class="s4">, </span><span class="s1">b = self.config[</span><span class="s3">'font'</span><span class="s1">]</span>
            <span class="s1">self._reconfig(</span><span class="s3">&quot;font&quot;</span><span class="s4">, </span><span class="s1">(face</span><span class="s4">, </span><span class="s1">s</span><span class="s4">, </span><span class="s1">b))</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(BAD_OPTION)</span>

    <span class="s4">def </span><span class="s1">setSize(self</span><span class="s4">, </span><span class="s1">size):</span>
        <span class="s4">if </span><span class="s5">5 </span><span class="s1">&lt;= size &lt;= </span><span class="s5">36</span><span class="s1">:</span>
            <span class="s1">f</span><span class="s4">, </span><span class="s1">s</span><span class="s4">, </span><span class="s1">b = self.config[</span><span class="s3">'font'</span><span class="s1">]</span>
            <span class="s1">self._reconfig(</span><span class="s3">&quot;font&quot;</span><span class="s4">, </span><span class="s1">(f</span><span class="s4">, </span><span class="s1">size</span><span class="s4">, </span><span class="s1">b))</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(BAD_OPTION)</span>

    <span class="s4">def </span><span class="s1">setStyle(self</span><span class="s4">, </span><span class="s1">style):</span>
        <span class="s4">if </span><span class="s1">style </span><span class="s4">in </span><span class="s1">[</span><span class="s3">'bold'</span><span class="s4">, </span><span class="s3">'normal'</span><span class="s4">, </span><span class="s3">'italic'</span><span class="s4">, </span><span class="s3">'bold italic'</span><span class="s1">]:</span>
            <span class="s1">f</span><span class="s4">, </span><span class="s1">s</span><span class="s4">, </span><span class="s1">b = self.config[</span><span class="s3">'font'</span><span class="s1">]</span>
            <span class="s1">self._reconfig(</span><span class="s3">&quot;font&quot;</span><span class="s4">, </span><span class="s1">(f</span><span class="s4">, </span><span class="s1">s</span><span class="s4">, </span><span class="s1">style))</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(BAD_OPTION)</span>

    <span class="s4">def </span><span class="s1">setTextColor(self</span><span class="s4">, </span><span class="s1">color):</span>
        <span class="s1">self.setFill(color)</span>


<span class="s4">class </span><span class="s1">Entry(GraphicsObject):</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">p</span><span class="s4">, </span><span class="s1">width):</span>
        <span class="s1">GraphicsObject.__init__(self</span><span class="s4">, </span><span class="s1">[])</span>
        <span class="s1">self.anchor = p.clone()</span>
        <span class="s0"># print self.anchor</span>
        <span class="s1">self.width = width</span>
        <span class="s1">self.text = tk.StringVar(_root)</span>
        <span class="s1">self.text.set(</span><span class="s3">&quot;&quot;</span><span class="s1">)</span>
        <span class="s1">self.fill = </span><span class="s3">&quot;gray&quot;</span>
        <span class="s1">self.color = </span><span class="s3">&quot;black&quot;</span>
        <span class="s1">self.font = DEFAULT_CONFIG[</span><span class="s3">'font'</span><span class="s1">]</span>
        <span class="s1">self.entry = </span><span class="s4">None</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">return </span><span class="s3">&quot;Entry({}, {})&quot;</span><span class="s1">.format(self.anchor</span><span class="s4">, </span><span class="s1">self.width)</span>

    <span class="s4">def </span><span class="s1">_draw(self</span><span class="s4">, </span><span class="s1">canvas</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s1">p = self.anchor</span>
        <span class="s1">x</span><span class="s4">, </span><span class="s1">y = canvas.toScreen(p.x</span><span class="s4">, </span><span class="s1">p.y)</span>
        <span class="s1">frm = tk.Frame(canvas.master)</span>
        <span class="s1">self.entry = tk.Entry(frm</span><span class="s4">,</span>
                              <span class="s1">width=self.width</span><span class="s4">,</span>
                              <span class="s1">textvariable=self.text</span><span class="s4">,</span>
                              <span class="s1">bg=self.fill</span><span class="s4">,</span>
                              <span class="s1">fg=self.color</span><span class="s4">,</span>
                              <span class="s1">font=self.font)</span>
        <span class="s1">self.entry.pack()</span>
        <span class="s0"># self.setFill(self.fill)</span>
        <span class="s1">self.entry.focus_set()</span>
        <span class="s4">return </span><span class="s1">canvas.create_window(x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">window=frm)</span>

    <span class="s4">def </span><span class="s1">getText(self):</span>
        <span class="s4">return </span><span class="s1">self.text.get()</span>

    <span class="s4">def </span><span class="s1">_move(self</span><span class="s4">, </span><span class="s1">dx</span><span class="s4">, </span><span class="s1">dy):</span>
        <span class="s1">self.anchor.move(dx</span><span class="s4">, </span><span class="s1">dy)</span>

    <span class="s4">def </span><span class="s1">getAnchor(self):</span>
        <span class="s4">return </span><span class="s1">self.anchor.clone()</span>

    <span class="s4">def </span><span class="s1">clone(self):</span>
        <span class="s1">other = Entry(self.anchor</span><span class="s4">, </span><span class="s1">self.width)</span>
        <span class="s1">other.config = self.config.copy()</span>
        <span class="s1">other.text = tk.StringVar()</span>
        <span class="s1">other.text.set(self.text.get())</span>
        <span class="s1">other.fill = self.fill</span>
        <span class="s4">return </span><span class="s1">other</span>

    <span class="s4">def </span><span class="s1">setText(self</span><span class="s4">, </span><span class="s1">t):</span>
        <span class="s1">self.text.set(t)</span>

    <span class="s4">def </span><span class="s1">setFill(self</span><span class="s4">, </span><span class="s1">color):</span>
        <span class="s1">self.fill = color</span>
        <span class="s4">if </span><span class="s1">self.entry:</span>
            <span class="s1">self.entry.config(bg=color)</span>

    <span class="s4">def </span><span class="s1">_setFontComponent(self</span><span class="s4">, </span><span class="s1">which</span><span class="s4">, </span><span class="s1">value):</span>
        <span class="s1">font = list(self.font)</span>
        <span class="s1">font[which] = value</span>
        <span class="s1">self.font = tuple(font)</span>
        <span class="s4">if </span><span class="s1">self.entry:</span>
            <span class="s1">self.entry.config(font=self.font)</span>

    <span class="s4">def </span><span class="s1">setFace(self</span><span class="s4">, </span><span class="s1">face):</span>
        <span class="s4">if </span><span class="s1">face </span><span class="s4">in </span><span class="s1">[</span><span class="s3">'helvetica'</span><span class="s4">, </span><span class="s3">'arial'</span><span class="s4">, </span><span class="s3">'courier'</span><span class="s4">, </span><span class="s3">'times roman'</span><span class="s1">]:</span>
            <span class="s1">self._setFontComponent(</span><span class="s5">0</span><span class="s4">, </span><span class="s1">face)</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(BAD_OPTION)</span>

    <span class="s4">def </span><span class="s1">setSize(self</span><span class="s4">, </span><span class="s1">size):</span>
        <span class="s4">if </span><span class="s5">5 </span><span class="s1">&lt;= size &lt;= </span><span class="s5">36</span><span class="s1">:</span>
            <span class="s1">self._setFontComponent(</span><span class="s5">1</span><span class="s4">, </span><span class="s1">size)</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(BAD_OPTION)</span>

    <span class="s4">def </span><span class="s1">setStyle(self</span><span class="s4">, </span><span class="s1">style):</span>
        <span class="s4">if </span><span class="s1">style </span><span class="s4">in </span><span class="s1">[</span><span class="s3">'bold'</span><span class="s4">, </span><span class="s3">'normal'</span><span class="s4">, </span><span class="s3">'italic'</span><span class="s4">, </span><span class="s3">'bold italic'</span><span class="s1">]:</span>
            <span class="s1">self._setFontComponent(</span><span class="s5">2</span><span class="s4">, </span><span class="s1">style)</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">raise </span><span class="s1">GraphicsError(BAD_OPTION)</span>

    <span class="s4">def </span><span class="s1">setTextColor(self</span><span class="s4">, </span><span class="s1">color):</span>
        <span class="s1">self.color = color</span>
        <span class="s4">if </span><span class="s1">self.entry:</span>
            <span class="s1">self.entry.config(fg=color)</span>


<span class="s4">class </span><span class="s1">Image(GraphicsObject):</span>
    <span class="s1">idCount = </span><span class="s5">0</span>
    <span class="s1">imageCache = {}  </span><span class="s0"># tk photoimages go here to avoid GC while drawn</span>

    <span class="s4">def </span><span class="s1">__init__(self</span><span class="s4">, </span><span class="s1">p</span><span class="s4">, </span><span class="s1">*pixmap):</span>
        <span class="s1">GraphicsObject.__init__(self</span><span class="s4">, </span><span class="s1">[])</span>
        <span class="s1">self.anchor = p.clone()</span>
        <span class="s1">self.imageId = Image.idCount</span>
        <span class="s1">Image.idCount = Image.idCount + </span><span class="s5">1</span>
        <span class="s4">if </span><span class="s1">len(pixmap) == </span><span class="s5">1</span><span class="s1">:  </span><span class="s0"># file name provided</span>
            <span class="s1">self.img = tk.PhotoImage(file=pixmap[</span><span class="s5">0</span><span class="s1">]</span><span class="s4">, </span><span class="s1">master=_root)</span>
        <span class="s4">else</span><span class="s1">:  </span><span class="s0"># width and height provided</span>
            <span class="s1">width</span><span class="s4">, </span><span class="s1">height = pixmap</span>
            <span class="s1">self.img = tk.PhotoImage(master=_root</span><span class="s4">, </span><span class="s1">width=width</span><span class="s4">, </span><span class="s1">height=height)</span>

    <span class="s4">def </span><span class="s1">__repr__(self):</span>
        <span class="s4">return </span><span class="s3">&quot;Image({}, {}, {})&quot;</span><span class="s1">.format(self.anchor</span><span class="s4">, </span><span class="s1">self.getWidth()</span><span class="s4">, </span><span class="s1">self.getHeight())</span>

    <span class="s4">def </span><span class="s1">_draw(self</span><span class="s4">, </span><span class="s1">canvas</span><span class="s4">, </span><span class="s1">options):</span>
        <span class="s1">p = self.anchor</span>
        <span class="s1">x</span><span class="s4">, </span><span class="s1">y = canvas.toScreen(p.x</span><span class="s4">, </span><span class="s1">p.y)</span>
        <span class="s1">self.imageCache[self.imageId] = self.img  </span><span class="s0"># save a reference</span>
        <span class="s4">return </span><span class="s1">canvas.create_image(x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">image=self.img)</span>

    <span class="s4">def </span><span class="s1">_move(self</span><span class="s4">, </span><span class="s1">dx</span><span class="s4">, </span><span class="s1">dy):</span>
        <span class="s1">self.anchor.move(dx</span><span class="s4">, </span><span class="s1">dy)</span>

    <span class="s4">def </span><span class="s1">undraw(self):</span>
        <span class="s4">try</span><span class="s1">:</span>
            <span class="s4">del </span><span class="s1">self.imageCache[self.imageId]  </span><span class="s0"># allow gc of tk photoimage</span>
        <span class="s4">except </span><span class="s1">KeyError:</span>
            <span class="s4">pass</span>
        <span class="s1">GraphicsObject.undraw(self)</span>

    <span class="s4">def </span><span class="s1">getAnchor(self):</span>
        <span class="s4">return </span><span class="s1">self.anchor.clone()</span>

    <span class="s4">def </span><span class="s1">clone(self):</span>
        <span class="s1">other = Image(Point(</span><span class="s5">0</span><span class="s4">, </span><span class="s5">0</span><span class="s1">)</span><span class="s4">, </span><span class="s5">0</span><span class="s4">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">other.img = self.img.copy()</span>
        <span class="s1">other.anchor = self.anchor.clone()</span>
        <span class="s1">other.config = self.config.copy()</span>
        <span class="s4">return </span><span class="s1">other</span>

    <span class="s4">def </span><span class="s1">getWidth(self):</span>
        <span class="s2">&quot;&quot;&quot;Returns the width of the image in pixels&quot;&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">self.img.width()</span>

    <span class="s4">def </span><span class="s1">getHeight(self):</span>
        <span class="s2">&quot;&quot;&quot;Returns the height of the image in pixels&quot;&quot;&quot;</span>
        <span class="s4">return </span><span class="s1">self.img.height()</span>

    <span class="s4">def </span><span class="s1">getPixel(self</span><span class="s4">, </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y):</span>
        <span class="s2">&quot;&quot;&quot;Returns a list [r,g,b] with the RGB color values for pixel (x,y) 
        r,g,b are in range(256) 
 
        &quot;&quot;&quot;</span>

        <span class="s1">value = self.img.get(x</span><span class="s4">, </span><span class="s1">y)</span>
        <span class="s4">if </span><span class="s1">type(value) == type(</span><span class="s5">0</span><span class="s1">):</span>
            <span class="s4">return </span><span class="s1">[value</span><span class="s4">, </span><span class="s1">value</span><span class="s4">, </span><span class="s1">value]</span>
        <span class="s4">elif </span><span class="s1">type(value) == type((</span><span class="s5">0</span><span class="s4">, </span><span class="s5">0</span><span class="s4">, </span><span class="s5">0</span><span class="s1">)):</span>
            <span class="s4">return </span><span class="s1">list(value)</span>
        <span class="s4">else</span><span class="s1">:</span>
            <span class="s4">return </span><span class="s1">list(map(int</span><span class="s4">, </span><span class="s1">value.split()))</span>

    <span class="s4">def </span><span class="s1">setPixel(self</span><span class="s4">, </span><span class="s1">x</span><span class="s4">, </span><span class="s1">y</span><span class="s4">, </span><span class="s1">color):</span>
        <span class="s2">&quot;&quot;&quot;Sets pixel (x,y) to the given color 
 
        &quot;&quot;&quot;</span>
        <span class="s1">self.img.put(</span><span class="s3">&quot;{&quot; </span><span class="s1">+ color + </span><span class="s3">&quot;}&quot;</span><span class="s4">, </span><span class="s1">(x</span><span class="s4">, </span><span class="s1">y))</span>

    <span class="s4">def </span><span class="s1">save(self</span><span class="s4">, </span><span class="s1">filename):</span>
        <span class="s2">&quot;&quot;&quot;Saves the pixmap image to filename. 
        The format for the save image is determined from the filname extension. 
 
        &quot;&quot;&quot;</span>

        <span class="s1">path</span><span class="s4">, </span><span class="s1">name = os.path.split(filename)</span>
        <span class="s1">ext = name.split(</span><span class="s3">&quot;.&quot;</span><span class="s1">)[-</span><span class="s5">1</span><span class="s1">]</span>
        <span class="s1">self.img.write(filename</span><span class="s4">, </span><span class="s1">format=ext)</span>


<span class="s4">def </span><span class="s1">color_rgb(r</span><span class="s4">, </span><span class="s1">g</span><span class="s4">, </span><span class="s1">b):</span>
    <span class="s2">&quot;&quot;&quot;r,g,b are intensities of red, green, and blue in range(256) 
    Returns color specifier string for the resulting color&quot;&quot;&quot;</span>
    <span class="s4">return </span><span class="s3">&quot;#%02x%02x%02x&quot; </span><span class="s1">% (r</span><span class="s4">, </span><span class="s1">g</span><span class="s4">, </span><span class="s1">b)</span>


<span class="s4">def </span><span class="s1">test():</span>
    <span class="s1">win = GraphWin()</span>
    <span class="s1">win.setCoords(</span><span class="s5">0</span><span class="s4">, </span><span class="s5">0</span><span class="s4">, </span><span class="s5">10</span><span class="s4">, </span><span class="s5">10</span><span class="s1">)</span>
    <span class="s1">t = Text(Point(</span><span class="s5">5</span><span class="s4">, </span><span class="s5">5</span><span class="s1">)</span><span class="s4">, </span><span class="s3">&quot;Centered Text&quot;</span><span class="s1">)</span>
    <span class="s1">t.draw(win)</span>
    <span class="s1">p = Polygon(Point(</span><span class="s5">1</span><span class="s4">, </span><span class="s5">1</span><span class="s1">)</span><span class="s4">, </span><span class="s1">Point(</span><span class="s5">5</span><span class="s4">, </span><span class="s5">3</span><span class="s1">)</span><span class="s4">, </span><span class="s1">Point(</span><span class="s5">2</span><span class="s4">, </span><span class="s5">7</span><span class="s1">))</span>
    <span class="s1">p.draw(win)</span>
    <span class="s1">e = Entry(Point(</span><span class="s5">5</span><span class="s4">, </span><span class="s5">6</span><span class="s1">)</span><span class="s4">, </span><span class="s5">10</span><span class="s1">)</span>
    <span class="s1">e.draw(win)</span>
    <span class="s1">win.getMouse()</span>
    <span class="s1">p.setFill(</span><span class="s3">&quot;red&quot;</span><span class="s1">)</span>
    <span class="s1">p.setOutline(</span><span class="s3">&quot;blue&quot;</span><span class="s1">)</span>
    <span class="s1">p.setWidth(</span><span class="s5">2</span><span class="s1">)</span>
    <span class="s1">s = </span><span class="s3">&quot;&quot;</span>
    <span class="s4">for </span><span class="s1">pt </span><span class="s4">in </span><span class="s1">p.getPoints():</span>
        <span class="s1">s = s + </span><span class="s3">&quot;(%0.1f,%0.1f) &quot; </span><span class="s1">% (pt.getX()</span><span class="s4">, </span><span class="s1">pt.getY())</span>
    <span class="s1">t.setText(e.getText())</span>
    <span class="s1">e.setFill(</span><span class="s3">&quot;green&quot;</span><span class="s1">)</span>
    <span class="s1">e.setText(</span><span class="s3">&quot;Spam!&quot;</span><span class="s1">)</span>
    <span class="s1">e.move(</span><span class="s5">2</span><span class="s4">, </span><span class="s5">0</span><span class="s1">)</span>
    <span class="s1">win.getMouse()</span>
    <span class="s1">p.move(</span><span class="s5">2</span><span class="s4">, </span><span class="s5">3</span><span class="s1">)</span>
    <span class="s1">s = </span><span class="s3">&quot;&quot;</span>
    <span class="s4">for </span><span class="s1">pt </span><span class="s4">in </span><span class="s1">p.getPoints():</span>
        <span class="s1">s = s + </span><span class="s3">&quot;(%0.1f,%0.1f) &quot; </span><span class="s1">% (pt.getX()</span><span class="s4">, </span><span class="s1">pt.getY())</span>
    <span class="s1">t.setText(s)</span>
    <span class="s1">win.getMouse()</span>
    <span class="s1">p.undraw()</span>
    <span class="s1">e.undraw()</span>
    <span class="s1">t.setStyle(</span><span class="s3">&quot;bold&quot;</span><span class="s1">)</span>
    <span class="s1">win.getMouse()</span>
    <span class="s1">t.setStyle(</span><span class="s3">&quot;normal&quot;</span><span class="s1">)</span>
    <span class="s1">win.getMouse()</span>
    <span class="s1">t.setStyle(</span><span class="s3">&quot;italic&quot;</span><span class="s1">)</span>
    <span class="s1">win.getMouse()</span>
    <span class="s1">t.setStyle(</span><span class="s3">&quot;bold italic&quot;</span><span class="s1">)</span>
    <span class="s1">win.getMouse()</span>
    <span class="s1">t.setSize(</span><span class="s5">14</span><span class="s1">)</span>
    <span class="s1">win.getMouse()</span>
    <span class="s1">t.setFace(</span><span class="s3">&quot;arial&quot;</span><span class="s1">)</span>
    <span class="s1">t.setSize(</span><span class="s5">20</span><span class="s1">)</span>
    <span class="s1">win.getMouse()</span>
    <span class="s1">win.close()</span>


<span class="s0"># MacOS fix 2</span>
<span class="s0"># tk.Toplevel(_root).destroy()</span>

<span class="s0"># MacOS fix 1</span>
<span class="s1">update()</span>

<span class="s4">if </span><span class="s1">__name__ == </span><span class="s3">&quot;__main__&quot;</span><span class="s1">:</span>
    <span class="s1">test()</span></pre>
</body>
</html>